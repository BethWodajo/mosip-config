# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at https://mozilla.org/MPL/2.0/.

spring.main.allow-bean-definition-overriding=true

spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, \
  org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, \
  org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration

## ---------------------------------------- Cache configuration --------------------------------------------------------

spring.cache.type=simple

#spring.cache.type=redis
#spring.cache.cache-names=${mosip.esignet.cache.names}
#spring.redis.host=localhost
#spring.redis.port=6379

mosip.esignet.cache.names=challenge-generated,challenge-verified,status-check
mosip.esignet.cache.size={'challenge-generated': 200,'challenge-verified': 200,'status-check': 200 }
mosip.esignet.cache.expire-in-seconds={'challenge-generated': 86400,'challenge-verified': 86400,'status-check': 86400 }

## ------------------------------------- Auth adapter ------------------------------------------------------------------
mosip.kernel.authmanager.url=https://api-internal.camdgc-dev.mosip.net
keycloak.external.url=https://iam.camdgc-dev.mosip.net
keycloak.internal.url=https://iam.camdgc-dev.mosip.net
auth.server.validate.url=${mosip.kernel.authmanager.url}/v1/authmanager/authorize/admin/validateToken
auth.server.admin.issuer.uri=${keycloak.external.url}/auth/realms/
auth-token-generator.rest.issuerUrl=${keycloak.internal.url}/auth/realms/mosip
mosip.keycloak.issuerUrl=${keycloak.internal.url}/auth/realms/mosip
mosip.auth.adapter.impl.basepackage=io.mosip.kernel.auth.defaultadapter
mosip.kernel.auth.adapter.ssl-bypass=true
mosip.kernel.auth.appid-realm-map={admin:'mosip',crereq:'mosip',creser:'mosip',idrepo:'mosip', signup:'mosip'}
mosip.kernel.auth.appids.realm.map={admin:'mosip',crereq:'mosip',creser:'mosip',idrepo:'mosip','regproc':'mosip', signup:'mosip'}

mosip.iam.adapter.clientid=mosip-signup-client
mosip.iam.adapter.clientsecret=QdDb3zAdFDgBvto7aNasLLJjxZ1xSSvu
mosip.iam.adapter.appid=signup
mosip.iam.adapter.issuerURL=${keycloak.external.url}/auth/realms/mosip
mosip.authmanager.client-token-endpoint=${mosip.kernel.authmanager.url}/v1/authmanager/authenticate/clientidsecretkey
mosip.iam.adapter.validate-expiry-check-rate=15
mosip.iam.adapter.renewal-before-expiry-interval=15
mosip.iam.adapter.self-token-renewal-enable=true

mosip.service-context=${server.servlet.context-path}
mosip.service.end-points=/**/*
mosip.service.exclude.auth.allowed.method=GET,POST
## -------------------------------------------- Sign Up  ----------------------------------------------------------
mosip.signup.ui.config.key-values={\
'identifier.pattern': '${mosip.signup.identifier.regex}', \
'identifier.prefix': '${mosip.signup.identifier.prefix}', \
'captcha.site.key': '${mosip.signup.captcha-validator.site-key}', \
'otp.length': '${mosip.signup.otp.length}', \
'password.pattern': '${mosip.signup.password.pattern}', \
'challenge.timeout': '${mosip.signup.challenge.timeout}', \
'resend.attempts': '${mosip.signup.challenge.resend-attempt}', \
'resend.delay': '${mosip.signup.challenge.resend-delay}', \
'fullname.pattern': '${mosip.signup.fullname.pattern}', \
'status.request.delay': '${mosip.signup.status.request.delay}', \
'status.request.limit': '${mosip.signup.status.request.limit}' \
}
## ---------------------------------
mosip.signup.generate-challenge.endpoint=${mosip.kernel.authmanager.url}/v1/otpmanager/otp/generate
mosip.signup.supported.challenge-format-types={'alpha-numeric'}
# captcha validator
mosip.signup.send-challenge.captcha-required=true
mosip.signup.integration.captcha-validator=GoogleRecaptchaValidatorService
mosip.signup.captcha-validator.url=https://www.google.com/recaptcha/api/siteverify
mosip.signup.captcha-validator.site-key=6LcdIvsoAAAAAMq_WeWuxfxgt26Nl3cjvMc-4IUJ
mosip.signup.captcha-validator.secret=6LcdIvsoAAAAALn0Rg5ajDSUAyeBgEOaJmCbL3pX
# Identifier Validator
mosip.signup.identifier.prefix=+855
mosip.signup.identifier.regex=\\+855\\d{8,9}
mosip.signup.password.pattern=^[a-zA-Z0-9]{8,20}$
mosip.signup.fullname.pattern=^[\u1780-\u17FF\u19E0-\u19FF\u1A00-\u1A9F\u0020]{1,30}$
# OTP challenge
# resend-delay,max-age, challenge.timeout, request.delay are determined in seconds
mosip.signup.cookie.max-age=180
mosip.signup.otp.length=6
mosip.signup.challenge.timeout=60
mosip.signup.challenge.resend-attempt=3
mosip.signup.challenge.resend-delay=180
# OTP Status
mosip.signup.status.request.limit=5
mosip.signup.status.request.delay=30
